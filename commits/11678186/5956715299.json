[{"filename": "lib/Conversion/NVGPUToLLVM/NVGPUToLLVMPass.cpp", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "file_content_changes": "@@ -145,7 +145,12 @@ class NVGPUOpPatternBase : public mlir::RewritePattern {\n     auto retTy = getReturnType(outputConstraints, rewriter);\n     auto res = ptxBuilder.launch(rewriter, loc, retTy,\n                                  /*hasSideEffects*/ hasSideEffects);\n-    rewriter.replaceOp(op, res);\n+    if (op->getNumResults() == 0) {\n+      rewriter.eraseOp(op);\n+    } else {\n+      rewriter.replaceOp(op, res);\n+    }\n+\n     return mlir::success();\n   }\n };"}]