[{"filename": "lib/codegen/selection/generator.cc", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "file_content_changes": "@@ -964,6 +964,8 @@ void generator::visit_store_inst(ir::store_inst * x){\n   Type *ty = cvt(val_op->get_type()->get_scalar_ty());\n   if (ty->isBFloatTy()) // llvm11-nvptx cannot select bf16 store\n     ty = f16_ty;\n+  if(ty->isIntegerTy(1))\n+    ty = builder_->getInt8Ty();\n   for(size_t i = 0; i < idxs.size(); i += vec){\n     indices_t idx = idxs[i];\n     // pointers\n@@ -1035,9 +1037,6 @@ void generator::visit_store_inst(ir::store_inst * x){\n     std::vector<Value*> args = {pred, ptr};\n     for(unsigned int ii = 0; ii < n_words; ii++){\n       size_t n_subw = width / nbits;\n-      Type *ty = cvt(val_op->get_type()->get_scalar_ty());\n-      if(ty->isIntegerTy(1))\n-        ty = builder_->getInt8Ty();\n       Value* curr = UndefValue::get(vec_ty(ty, n_subw));\n       for(unsigned int jj = 0; jj < n_subw; jj++){\n         Value* new_elt = vals_[val_op][idxs[i + ii*n_subw + jj]];"}]