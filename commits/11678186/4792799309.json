[{"filename": "python/triton/compiler/compiler.py", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "file_content_changes": "@@ -291,6 +291,7 @@ def make_hash(fn, **kwargs):\n     \"ptx\": ptx_arg_type_pattern,\n }\n \n+ttgir_num_warps_pattern = r'\"triton_gpu.num-warps\"\\s?=\\s?(\\d+)\\s?:'\n \n def _get_jsonable_constants(constants):\n     def _is_jsonable(x):\n@@ -404,6 +405,8 @@ def compile(fn, **kwargs):\n         match = re.search(prototype_pattern[ir], src, re.MULTILINE)\n         name, signature = match.group(1), match.group(2)\n         types = re.findall(arg_type_pattern[ir], signature)\n+        if ir == 'ttgir':\n+            num_warps = int(re.search(ttgir_num_warps_pattern, src).group(1))\n         param_tys = [convert_type_repr(ty) for ty in types]\n         signature = {k: v for k, v in enumerate(param_tys)}\n         first_stage = list(stages.keys()).index(ir)"}]