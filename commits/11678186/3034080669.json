[{"filename": "python/triton/compiler.py", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "file_content_changes": "@@ -11,10 +11,11 @@\n import tempfile\n import warnings\n from typing import Any, Dict, Set, Tuple, Union\n-\n+import functools\n import setuptools\n import torch\n from filelock import FileLock\n+import subprocess\n \n import triton\n import triton._C.libtriton.triton as _triton\n@@ -925,11 +926,16 @@ def quiet():\n         sys.stdout, sys.stderr = old_stdout, old_stderr\n \n \n+@functools.lru_cache()\n+def libcuda_dir():\n+    loc = subprocess.check_output([\"whereis\", \"libcuda.so\"]).decode().strip().split()[-1]\n+    return os.path.dirname(loc)\n+\n+\n def _build(name, src, path):\n-    libcuda = shutil.which(\"libcuda.so\")\n     # add framework\n     extra_compile_args = []\n-    library_dirs = [os.path.dirname(libcuda)]\n+    library_dirs = [libcuda_dir()]\n     include_dirs = [path, \"/usr/local/cuda/include/\"]\n     libraries = ['cuda']\n     # extra arguments"}]