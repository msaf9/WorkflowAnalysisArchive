[{"filename": "python/setup.py", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "file_content_changes": "@@ -13,6 +13,7 @@\n \n from setuptools import Extension, setup\n from setuptools.command.build_ext import build_ext\n+from setuptools.command.build_py import build_py\n \n \n # Taken from https://github.com/pytorch/pytorch/blob/master/tools/setup_helpers/env.py\n@@ -135,6 +136,11 @@ def download_and_copy_ptxas():\n \n # ---- cmake extension ----\n \n+class CMakeBuildPy(build_py):\n+    def run(self) -> None:\n+        self.run_command('build_ext')\n+        return super().run()\n+\n \n class CMakeExtension(Extension):\n     def __init__(self, name, path, sourcedir=\"\"):\n@@ -266,7 +272,7 @@ def build_extension(self, ext):\n     ],\n     include_package_data=True,\n     ext_modules=[CMakeExtension(\"triton\", \"triton/_C/\")],\n-    cmdclass={\"build_ext\": CMakeBuild},\n+    cmdclass={\"build_ext\": CMakeBuild, \"build_py\": CMakeBuildPy},\n     zip_safe=False,\n     # for PyPI\n     keywords=[\"Compiler\", \"Deep Learning\"],"}]