[{"filename": "lib/Dialect/TritonGPU/Transforms/Combine.cpp", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "file_content_changes": "@@ -685,7 +685,12 @@ class RematerializeBackward : public mlir::RewritePattern {\n       if (processed.contains(currOperation)) {\n         Operation *newOperation =\n             cloneWithInferType(rewriter, currOperation, mapping);\n-        newOperation->moveAfter(currOperation);\n+        if(newOperation){\n+          if(mapping.contains(currOperand))\n+            newOperation->moveAfter(mapping.lookup(currOperand).getDefiningOp());\n+          else\n+            newOperation->moveAfter(currOperation);\n+        }\n         currOperation = newOperation;\n         currOperand = currOperation->getResult(0);\n       }"}]