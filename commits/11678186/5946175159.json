[{"filename": "lib/Conversion/TritonGPUToLLVM/LoadStoreOpToLLVM.cpp", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "file_content_changes": "@@ -683,7 +683,8 @@ struct StoreAsyncOpConversion\n \n     unsigned numElems = triton::gpu::getTotalElemsPerThread(srcTy);\n \n-    auto instrShape = mmaLayout.getInstrShape();\n+    auto instrShape = mmaVersionToInstrShape(\n+        mmaLayout, getShapePerCTA(mmaLayout, srcTy.getShape()));\n     auto warpsPerCTA = mmaLayout.getWarpsPerCTA();\n     uint32_t repM =\n         ceil<unsigned>(shapePerCTA[0], instrShape[0] * warpsPerCTA[0]);\n@@ -770,7 +771,7 @@ struct StoreAsyncOpConversion\n     unsigned leadingDimOffset =\n         numElemsPerSwizzlingRow * shapePerCTA[dstOrder[1]];\n \n-    uint32_t rowsPerRep = getShapePerCTATile(mmaLayout)[0];\n+    uint32_t rowsPerRep = getShapePerCTATile(mmaLayout, srcTy.getShape())[0];\n \n     Value warpId = udiv(threadId, i32_val(32));\n     Value warpId0 = urem(urem(warpId, i32_val(warpsPerCTA[0])),"}]