[{"filename": "CMakeLists.txt", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "file_content_changes": "@@ -132,14 +132,15 @@ endif()\n # Python module\n if(TRITON_BUILD_PYTHON_MODULE)\n     message(STATUS \"Adding Python module\")\n+    set(PYTHON_SRC_PATH ${CMAKE_CURRENT_SOURCE_DIR}/python/src)\n+    include_directories(\".\" ${PYTHON_SRC_PATH})\n     if (PYTHON_INCLUDE_DIRS)\n-      set(PYTHON_SRC_PATH ${CMAKE_CURRENT_SOURCE_DIR}/python/src)\n-      include_directories(\".\" ${PYTHON_SRC_PATH} ${PYTHON_INCLUDE_DIRS})\n+      include_directories(${PYTHON_INCLUDE_DIRS})\n       link_directories(${PYTHON_LINK_DIRS})\n+      link_libraries(${PYTHON_LIBRARIES})\n     else()\n       find_package(Python3 REQUIRED COMPONENTS Development)\n-      set(PYTHON_SRC_PATH ${CMAKE_CURRENT_SOURCE_DIR}/python/src)\n-      include_directories(\".\" ${PYTHON_SRC_PATH} ${Python3_INCLUDE_DIRS})\n+      include_directories(${Python3_INCLUDE_DIRS})\n       link_directories(${Python3_LIBRARY_DIRS})\n       link_libraries(${Python3_LIBRARIES})\n       add_link_options(${Python3_LINK_OPTIONS})"}, {"filename": "python/setup.py", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "file_content_changes": "@@ -136,15 +136,19 @@ def build_extension(self, ext):\n         if not os.path.exists(llvm_build_dir):\n             os.makedirs(llvm_build_dir)\n         # python directories\n-        python_include_dirs = [distutils.sysconfig.get_python_inc()] + ['/usr/local/cuda/include']\n+        python_include_dir = distutils.sysconfig.get_python_inc()\n+        python_link_dir = distutils.sysconfig.get_python_lib()\n+        python_library = distutils.sysconfig.get_config_var('LDLIBRARY')\n         cmake_args = [\n             \"-DLLVM_ENABLE_WERROR=ON\",\n             \"-DCMAKE_LIBRARY_OUTPUT_DIRECTORY=\" + extdir,\n             \"-DTRITON_BUILD_TUTORIALS=OFF\",\n             \"-DTRITON_BUILD_PYTHON_MODULE=ON\",\n             # '-DPYTHON_EXECUTABLE=' + sys.executable,\n             # '-DCMAKE_VERBOSE_MAKEFILE:BOOL=ON',\n-            \"-DPYTHON_INCLUDE_DIRS=\" + \";\".join(python_include_dirs),\n+            \"-DPYTHON_INCLUDE_DIRS=\" + python_include_dir,\n+            \"-DPYTHON_LINK_DIRS=\" + python_link_dir,\n+            \"-DPYTHON_LIBRARIES=\" + python_library,\n             \"-DLLVM_EXTERNAL_LIT=\" + lit_dir\n         ] + thirdparty_cmake_args\n "}]