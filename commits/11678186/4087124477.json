[{"filename": "python/setup.py", "status": "modified", "additions": 14, "deletions": 7, "changes": 21, "file_content_changes": "@@ -1,15 +1,16 @@\n import distutils\n import os\n import platform\n-import tempfile\n import re\n import shutil\n import subprocess\n import sys\n import tarfile\n+import tempfile\n import urllib.request\n from distutils.version import LooseVersion\n from typing import NamedTuple\n+\n from setuptools import Extension, setup\n from setuptools.command.build_ext import build_ext\n \n@@ -32,6 +33,7 @@ def get_build_type():\n \n # --- third party packages -----\n \n+\n class Package(NamedTuple):\n     package: str\n     name: str\n@@ -42,17 +44,21 @@ class Package(NamedTuple):\n     syspath_var_name: str\n \n # pybind11\n+\n+\n def get_pybind11_package_info():\n     name = \"pybind11-2.10.0\"\n     url = \"https://github.com/pybind/pybind11/archive/refs/tags/v2.10.0.tar.gz\"\n     return Package(\"pybind11\", name, url, \"include/pybind11/pybind11.h\", \"PYBIND11_INCLUDE_DIR\", \"\", \"PYBIND11_SYSPATH\")\n \n # llvm\n+\n+\n def get_llvm_package_info():\n     # download if nothing is installed\n     system = platform.system()\n     vglibc = tuple(map(int, platform.libc_ver()[1].split('.')))\n-    vglibc = vglibc[0]*100 + vglibc[1]\n+    vglibc = vglibc[0] * 100 + vglibc[1]\n     linux_suffix = 'ubuntu-18.04' if vglibc > 217 else 'centos-7'\n     system_suffix = {\"Linux\": \"linux-gnu-{}\".format(linux_suffix), \"Darwin\": \"apple-darwin\"}[system]\n     use_assert_enabled_llvm = check_env_flag(\"TRITON_USE_ASSERT_ENABLED_LLVM\", \"False\")\n@@ -61,6 +67,7 @@ def get_llvm_package_info():\n     url = \"https://github.com/ptillet/triton-llvm-releases/releases/download/llvm-14.0.6-f28c006a5895/{}.tar.xz\".format(name)\n     return Package(\"llvm\", name, url, \"lib\", \"LLVM_INCLUDE_DIRS\", \"LLVM_LIBRARY_DIR\", \"LLVM_SYSPATH\")\n \n+\n def get_thirdparty_packages(triton_cache_path):\n     packages = [get_pybind11_package_info(), get_llvm_package_info()]\n     thirdparty_cmake_args = []\n@@ -88,6 +95,7 @@ def get_thirdparty_packages(triton_cache_path):\n \n # ---- package data ---\n \n+\n def download_and_copy_ptxas():\n     base_dir = os.path.dirname(__file__)\n     src_path = \"bin/ptxas\"\n@@ -100,12 +108,11 @@ def download_and_copy_ptxas():\n         ftpstream = urllib.request.urlopen(url)\n         file = tarfile.open(fileobj=ftpstream, mode=\"r|*\")\n         with tempfile.TemporaryDirectory() as temp_dir:\n-          file.extractall(path=temp_dir)\n-          src_path = os.path.join(temp_dir, src_path)\n-          os.makedirs(os.path.split(dst_path)[0], exist_ok=True)\n-          shutil.copy(src_path, dst_path)\n+            file.extractall(path=temp_dir)\n+            src_path = os.path.join(temp_dir, src_path)\n+            os.makedirs(os.path.split(dst_path)[0], exist_ok=True)\n+            shutil.copy(src_path, dst_path)\n     return dst_suffix\n-          \n \n \n # ---- cmake extension ----"}]