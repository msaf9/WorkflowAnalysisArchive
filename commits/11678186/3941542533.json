[{"filename": "bin/CMakeLists.txt", "status": "modified", "additions": 33, "deletions": 32, "changes": 65, "file_content_changes": "@@ -26,35 +26,36 @@ target_link_libraries(triton-opt PRIVATE\n mlir_check_all_link_libraries(triton-opt)\n \n \n-# add_llvm_executable(triton-translate triton-translate.cpp PARTIAL_SOURCES_INTENDED)\n-#llvm_update_compile_flags(triton-translate)\n-# target_link_libraries(triton-translate PRIVATE\n-#         TritonAnalysis\n-#         TritonTransforms\n-#         TritonGPUTransforms\n-#         TritonLLVMIR\n-#         TritonDriver\n-#         ${dialect_libs}\n-#         ${conversion_libs}\n-#         # tests\n-#         TritonTestAnalysis\n-\n-#         LLVMCore\n-#         LLVMSupport\n-#         LLVMOption\n-#         LLVMCodeGen\n-#         LLVMAsmParser\n-\n-#         # MLIR core\n-#         MLIROptLib\n-#         MLIRIR\n-#         MLIRPass\n-#         MLIRSupport\n-#         MLIRTransforms\n-#         MLIRExecutionEngine\n-#         MLIRMathToLLVM\n-#         MLIRTransformUtils\n-#         MLIRLLVMToLLVMIRTranslation\n-#         MLIRNVVMToLLVMIRTranslation\n-#         )\n-# mlir_check_all_link_libraries(triton-translate)\n+add_llvm_executable(triton-translate triton-translate.cpp PARTIAL_SOURCES_INTENDED)\n+llvm_update_compile_flags(triton-translate)\n+ target_link_libraries(triton-translate PRIVATE\n+         TritonAnalysis\n+         TritonTransforms\n+         TritonGPUTransforms\n+         TritonLLVMIR\n+         TritonPTX\n+         ${dialect_libs}\n+         ${conversion_libs}\n+         # tests\n+         TritonTestAnalysis\n+\n+         LLVMCore\n+         LLVMSupport\n+         LLVMOption\n+         LLVMCodeGen\n+         LLVMAsmParser\n+\n+         # MLIR core\n+         MLIROptLib\n+         MLIRIR\n+         MLIRLLVMIR\n+         MLIRPass\n+         MLIRSupport\n+         MLIRTransforms\n+         MLIRExecutionEngine\n+         MLIRMathToLLVM\n+         MLIRTransformUtils\n+         MLIRLLVMToLLVMIRTranslation\n+         MLIRNVVMToLLVMIRTranslation\n+         )\n+mlir_check_all_link_libraries(triton-translate)"}, {"filename": "bin/triton-translate.cpp", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "file_content_changes": "@@ -15,7 +15,7 @@\n #include \"triton/Dialect/Triton/IR/Dialect.h\"\n #include \"triton/Dialect/TritonGPU/IR/Dialect.h\"\n #include \"triton/Target/LLVMIR/LLVMIRTranslation.h\"\n-#include \"triton/driver/llvm.h\"\n+#include \"triton/Target/PTX/PTXTranslation.h\"\n #include \"llvm/IR/LLVMContext.h\"\n #include \"llvm/Support/CommandLine.h\"\n #include \"llvm/Support/InitLLVM.h\"\n@@ -116,8 +116,8 @@ LogicalResult tritonTranslateMain(int argc, char **argv,\n   if (targetKind == \"llvmir\")\n     llvm::outs() << *llvmir << '\\n';\n   else if (targetKind == \"ptx\")\n-    llvm::outs() << ::triton::driver::llir_to_ptx(\n-        llvmir.get(), SMArch.getValue(), ptxVersion.getValue());\n+    llvm::outs() << ::triton::translateLLVMIRToPTX(*llvmir, SMArch.getValue(),\n+                                                   ptxVersion.getValue());\n \n   return success();\n }"}, {"filename": "lib/Target/LLVMIR/CMakeLists.txt", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "file_content_changes": "@@ -7,6 +7,7 @@ add_mlir_translation_library(TritonLLVMIR\n         LINK_LIBS PUBLIC\n         MLIRIR\n         MLIRLLVMIR\n+        MLIRSCFToStandard\n         MLIRSupport\n         MLIRTargetLLVMIRExport\n         )"}]