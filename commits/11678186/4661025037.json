[{"filename": "lib/Dialect/TritonGPU/Transforms/Pipeline.cpp", "status": "modified", "additions": 2, "deletions": 6, "changes": 8, "file_content_changes": "@@ -333,10 +333,6 @@ Value LoopPipeliner::getLoadMask(triton::LoadOp loadOp, Value mappedMask,\n }\n \n void LoopPipeliner::emitPrologue() {\n-  // llvm::errs() << \"loads to pipeline...:\\n\";\n-  // for (Value load : loads)\n-  //   llvm::errs() << load << \"\\n\";\n-\n   OpBuilder builder(forOp);\n   for (BlockArgument &arg : forOp.getRegionIterArgs()) {\n     OpOperand &operand = forOp.getOpOperandForRegionIterArg(arg);\n@@ -361,7 +357,7 @@ void LoopPipeliner::emitPrologue() {\n     for (Operation &op : forOp.getLoopBody().front()) {\n       if (depOps.contains(&op))\n         orderedDeps.push_back(&op);\n-      else if (loads.contains(op.getResult(0)))\n+      else if (op.getNumResults() > 0 && loads.contains(op.getResult(0)))\n         orderedDeps.push_back(&op);\n     }\n     assert(depOps.size() + loads.size() == orderedDeps.size() &&\n@@ -575,7 +571,7 @@ scf::ForOp LoopPipeliner::createNewForOp() {\n   for (Operation &op : forOp.getLoopBody().front()) {\n     if (depOps.contains(&op))\n       orderedDeps.push_back(&op);\n-    else if (loads.contains(op.getResult(0)))\n+    else if (op.getNumResults() > 0 && loads.contains(op.getResult(0)))\n       orderedDeps.push_back(&op);\n   }\n   assert(depOps.size() + loads.size() == orderedDeps.size() &&"}]