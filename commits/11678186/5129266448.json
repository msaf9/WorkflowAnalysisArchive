[{"filename": "python/test/unit/language/test_core.py", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "file_content_changes": "@@ -467,6 +467,19 @@ def broadcast_kernel(x_ptr, y_ptr, y_broadcasted_ptr, M: tl.constexpr, N: tl.con\n     broadcast_kernel[(1,)](x_tri, y_tri, y_broadcasted_tri, M=M, N=N)\n     assert (y_broadcasted_np == to_numpy(y_broadcasted_tri)).all()\n \n+# ------------------\n+# test invalid slice\n+# ------------------\n+def test_invalid_slice():\n+    dst = torch.empty(128, device='cuda')\n+\n+    @triton.jit\n+    def _kernel(dst):\n+        dst[10:]\n+\n+    with pytest.raises(triton.CompilationError, match='unsupported tensor index'):\n+        _kernel[(1,)](dst=dst)\n+\n \n # ----------------\n # test expand_dims"}, {"filename": "python/triton/language/core.py", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "file_content_changes": "@@ -711,7 +711,7 @@ def __getitem__(self, slices, _builder=None):\n         for dim, sl in enumerate(slices):\n             if isinstance(sl, constexpr) and sl.value is None:\n                 ret = semantic.expand_dims(ret, dim, _builder)\n-            elif sl == slice(None, None, None):\n+            elif isinstance(sl, slice) and sl.start is None and sl.stop is None and sl.step is None:\n                 pass\n             else:\n                 assert False, f\"unsupported tensor index: {sl}\""}]