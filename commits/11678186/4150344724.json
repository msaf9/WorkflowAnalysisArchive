[{"filename": "lib/Dialect/TritonGPU/Transforms/Combine.cpp", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "file_content_changes": "@@ -683,7 +683,9 @@ class RematerializeBackward : public mlir::RewritePattern {\n       // rematerialize the operand if necessary\n       Operation *currOperation = currOperand.getDefiningOp();\n       if (processed.contains(currOperation)) {\n-        currOperation = cloneWithInferType(rewriter, currOperation, mapping);\n+        Operation *newOperation = cloneWithInferType(rewriter, currOperation, mapping);\n+        newOperation->moveBefore(currOperation);\n+        currOperation = newOperation;\n         currOperand = currOperation->getResult(0);\n       }\n       // compute target type for the layout cast"}]