[{"filename": "lib/Dialect/TritonGPU/Transforms/UpdateMmaForVolta.cpp", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "file_content_changes": "@@ -220,14 +220,15 @@ class UpdateMMAForMMAv1 : public mlir::RewritePattern {\n \n     auto tensorTy = constant.getResult().getType().cast<RankedTensorType>();\n     auto mma = tensorTy.getEncoding().dyn_cast<MmaEncodingAttr>();\n-    if ((!mma))\n+    auto dot = tensorTy.getEncoding().dyn_cast<DotOperandEncodingAttr>();\n+    if (!mma && !dot)\n       return failure();\n \n     auto newTensorTy = getUpdatedType(tensorTy);\n     if (auto attr = constant.getValue().dyn_cast<SplatElementsAttr>()) {\n       auto newRet =\n           SplatElementsAttr::get(newTensorTy, attr.getSplatValue<Attribute>());\n-      rewriter.replaceOpWithNewOp<arith::ConstantOp>(op, newTensorTy, newRet);\n+      rewriter.replaceOpWithNewOp<arith::ConstantOp>(op, newRet);\n       return success();\n     }\n "}]