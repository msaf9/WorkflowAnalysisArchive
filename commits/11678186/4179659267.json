[{"filename": "lib/Dialect/TritonGPU/Transforms/Combine.cpp", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "file_content_changes": "@@ -601,7 +601,7 @@ class FoldConvertAndReduce : public mlir::RewritePattern {\n         return failure();\n       }\n       // don't rematerialize non-element-wise\n-      if (!op->hasTrait<mlir::OpTrait::SameOperandsAndResultEncoding>() &&\n+      if (!isa<triton::ViewOp, triton::CatOp>(op) &&\n           !op->hasTrait<mlir::OpTrait::Elementwise>() &&\n           !isa<triton::StoreOp>(op)) {\n         return failure();\n@@ -865,8 +865,9 @@ class RematerializeForward : public mlir::RewritePattern {\n       return failure();\n \n     for (Operation *op : cvtSlices) {\n-      if (!op->hasTrait<mlir::OpTrait::SameOperandsAndResultEncoding>() &&\n-          !op->hasTrait<mlir::OpTrait::SameOperandsAndResultType>())\n+      if (!isa<triton::ViewOp, triton::CatOp>(op) &&\n+          !op->hasTrait<mlir::OpTrait::Elementwise>() &&\n+          !isa<triton::StoreOp>(op))\n         return failure();\n       for (Value arg : op->getOperands()) {\n         Operation *argOp = arg.getDefiningOp();"}]