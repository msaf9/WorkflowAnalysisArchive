[{"filename": "lib/codegen/selection/generator.cc", "status": "modified", "additions": 10, "deletions": 6, "changes": 16, "file_content_changes": "@@ -743,9 +743,11 @@ void generator::visit_load_inst(ir::load_inst* x){\n   if(op->get_type()->is_block_ty()){\n     auto   ord = ords_.at(op);\n     size_t aln = alignment_->get(op, ord[0]);\n-    size_t max_eq = mx ? alignment_->get_cst_info(mx->get_mask_operand())[ord[0]].num_cst : 1;\n-    max_eq = std::max<size_t>(max_eq, 1);\n-    aln = std::min(aln, max_eq);\n+    if(mx){\n+      size_t max_eq = alignment_->get_cst_info(mx->get_mask_operand())[ord[0]].num_cst;\n+      max_eq = std::max<size_t>(max_eq, 1);\n+      aln = std::min(aln, max_eq);\n+    }\n     auto layout = layouts_->get(x)->to_scanline();\n     if(layout){\n       size_t nts = layout->nts(ord[0]);\n@@ -902,9 +904,11 @@ void generator::visit_store_inst(ir::store_inst * x){\n     auto ord = ords_.at(x->get_pointer_operand());\n     size_t aln = alignment_->get(ptr_op, ord[0]);\n     size_t nts = axes_.at(a_axes_->get(x->get_pointer_operand(), ord[0])).contiguous;\n-    size_t max_eq = mx ? alignment_->get_cst_info(mx->get_mask_operand())[ord[0]].num_cst : 1;\n-    max_eq = std::max<size_t>(max_eq, 1);\n-    aln = std::min(aln, max_eq);\n+    if(mx){\n+      size_t max_eq = alignment_->get_cst_info(mx->get_mask_operand())[ord[0]].num_cst;\n+      max_eq = std::max<size_t>(max_eq, 1);\n+      aln = std::min(aln, max_eq);\n+    }\n     vec  = std::min(nts, aln);\n   }\n   auto idxs    = idxs_.at(val_op);"}]