[{"filename": "python/triton/compiler.py", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "file_content_changes": "@@ -1026,13 +1026,10 @@ def format_of(ty):\n \n \n void _{kernel_name}(int gridX, int gridY, int gridZ, CUstream stream, {arg_decls}) {{\n-  CUcontext ctx;\n-  CUdevice device;\n-  CUDA_CHECK(cuStreamGetCtx(stream, &ctx));\n-  CUDA_CHECK(cuCtxGetDevice(&device));\n-\n   // TODO: machine may have heterogeneous devices\n   if(function == 0){{\n+    CUdevice device;\n+    CUDA_CHECK(cuCtxGetDevice(&device));\n     init_module(device);\n   }}\n   void *params[] = {{ {', '.join(f\"&arg{i}\" for i in signature.keys() if i not in constants)} }};"}]