[{"filename": "include/triton/Dialect/TritonGPU/IR/TritonGPUAttrDefs.td", "status": "modified", "additions": 7, "deletions": 6, "changes": 13, "file_content_changes": "@@ -384,8 +384,8 @@ For example, the matrix L corresponding to blockTileSize=[32,16] is:\n       SmallVector<unsigned> wpt({static_cast<unsigned>(numWarps), 1});\n       int versionMinor = 0;\n \n-      assert(id < (1<<numBitsToHoldMmaV1ID()) && \"MMAv1 ID exceeds the maximum\");\n-      for (int i = 0; i < numBitsToHoldMmaV1ID(); ++i)\n+      assert(id < (1<<numBitsToHoldMmaV1ID) && \"MMAv1 ID exceeds the maximum\");\n+      for (int i = 0; i < numBitsToHoldMmaV1ID; ++i)\n         versionMinor |= static_cast<bool>((1<<i) & id) * (1<<(4+i));\n \n       return $_get(context, versionMajor, versionMinor, wpt);\n@@ -408,8 +408,8 @@ For example, the matrix L corresponding to blockTileSize=[32,16] is:\n                          (isAVec4 * (1<<2)) |\\\n                          (isBVec4 * (1<<3));\n \n-      assert(id < (1<<numBitsToHoldMmaV1ID()) && \"MMAv1 ID exceeds the maximum\");\n-      for (int i = 0; i < numBitsToHoldMmaV1ID(); ++i)\n+      assert(id < (1<<numBitsToHoldMmaV1ID) && \"MMAv1 ID exceeds the maximum\");\n+      for (int i = 0; i < numBitsToHoldMmaV1ID; ++i)\n         versionMinor |= static_cast<bool>((1<<i) & id) * (1<<(4+i));\n \n       return $_get(context, versionMajor, versionMinor, warpsPerCTA);\n@@ -421,8 +421,9 @@ For example, the matrix L corresponding to blockTileSize=[32,16] is:\n     bool isAmpere() const;\n     // Get [isARow, isBRow, isAVec4, isBVec4, id] from versionMinor\n     std::tuple<bool, bool, bool, bool, int> decodeVoltaLayoutStates() const;\n-    // Get number of bits in versionMinor to hold the ID of the MMA encoding instance.\n-    static int numBitsToHoldMmaV1ID();\n+    // Number of bits in versionMinor to hold the ID of the MMA encoding instance.\n+    // Here 5 bits can hold 32 IDs in a single module.\n+    static constexpr int numBitsToHoldMmaV1ID{5};\n   }];\n \n }"}, {"filename": "lib/Dialect/TritonGPU/IR/Dialect.cpp", "status": "modified", "additions": 1, "deletions": 6, "changes": 7, "file_content_changes": "@@ -603,17 +603,12 @@ MmaEncodingAttr::decodeVoltaLayoutStates() const {\n   bool isBVec4 = versionMinor & (1 << 3);\n \n   int id = 0;\n-  for (int i = numBitsToHoldMmaV1ID() - 1; i >= 0; --i)\n+  for (int i = numBitsToHoldMmaV1ID - 1; i >= 0; --i)\n     id = (id << 1) + static_cast<bool>(versionMinor & (1 << (4 + i)));\n \n   return std::make_tuple(isARow, isBRow, isAVec4, isBVec4, id);\n }\n \n-int MmaEncodingAttr::numBitsToHoldMmaV1ID() {\n-  return 5; // 5 bits to hold maxinum 32 MMA encoding instances in a single\n-            // kernel.\n-}\n-\n //===----------------------------------------------------------------------===//\n // DotOperand Encoding\n //===----------------------------------------------------------------------===//"}]