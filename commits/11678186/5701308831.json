[{"filename": "lib/Target/PTX/PTXTranslation.cpp", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "file_content_changes": "@@ -13,6 +13,7 @@\n \n #include <mutex>\n #include <optional>\n+#include <memory>\n \n namespace triton {\n \n@@ -77,9 +78,12 @@ std::string translateLLVMIRToPTX(llvm::Module &module, int cc, int version) {\n   opt.UnsafeFPMath = false;\n   opt.NoInfsFPMath = false;\n   opt.NoNaNsFPMath = true;\n-  llvm::TargetMachine *machine = target->createTargetMachine(\n+  std::unique_ptr<llvm::TargetMachine> machine{\n+    target->createTargetMachine(\n       module.getTargetTriple(), proc, features, opt, llvm::Reloc::PIC_,\n-      std::nullopt, llvm::CodeGenOpt::Aggressive);\n+      std::nullopt, llvm::CodeGenOpt::Aggressive\n+    )\n+  };\n   // set data layout\n   if (layout.empty())\n     module.setDataLayout(machine->createDataLayout());"}]