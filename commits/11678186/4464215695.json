[{"filename": "lib/Target/PTX/PTXTranslation.cpp", "status": "modified", "additions": 10, "deletions": 5, "changes": 15, "file_content_changes": "@@ -1,6 +1,5 @@\n #include \"triton/Target/PTX/PTXTranslation.h\"\n #include \"triton/Target/LLVMIR/LLVMIRTranslation.h\"\n-#include <optional>\n \n #include \"llvm/IR/IRBuilder.h\"\n #include \"llvm/IR/LegacyPassManager.h\"\n@@ -12,13 +11,19 @@\n #include \"llvm/Support/TargetSelect.h\"\n #include \"llvm/Target/TargetMachine.h\"\n \n+#include <mutex>\n+#include <optional>\n+\n namespace triton {\n \n static void initLLVM() {\n-  LLVMInitializeNVPTXTargetInfo();\n-  LLVMInitializeNVPTXTarget();\n-  LLVMInitializeNVPTXTargetMC();\n-  LLVMInitializeNVPTXAsmPrinter();\n+  static std::once_flag init_flag;\n+  std::call_once(init_flag, []() {\n+    LLVMInitializeNVPTXTargetInfo();\n+    LLVMInitializeNVPTXTarget();\n+    LLVMInitializeNVPTXTargetMC();\n+    LLVMInitializeNVPTXAsmPrinter();\n+  });\n }\n \n static bool findAndReplace(std::string &str, const std::string &begin,"}]