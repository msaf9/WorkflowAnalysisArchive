[{"filename": "lib/Target/LLVMIR/LLVMIRTranslation.cpp", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "file_content_changes": "@@ -123,15 +123,19 @@ static std::map<std::string, std::string> getExternLibs(mlir::ModuleOp module) {\n     // TODO(Keren): handle external linkage other than libdevice?\n     namespace fs = std::filesystem;\n     static const std::string libdevice = \"libdevice\";\n-    static const std::filesystem::path path = std::filesystem::path(__FILE__)\n+    std::string libdevice_path = ::triton::tools::getenv(\"TRITON_LIBDEVICE_PATH\");\n+    if (libdevice_path.empty()) {\n+      static const std::filesystem::path path = std::filesystem::path(__FILE__)\n                                                   .parent_path()\n                                                   .parent_path()\n                                                   .parent_path()\n                                                   .parent_path() /\n                                               \"python\" / \"triton\" /\n                                               \"third_party\" / \"cuda\" / \"lib\" /\n                                               \"libdevice.10.bc\";\n-    externLibs.try_emplace(libdevice, path.string());\n+      libdevice_path = path.string();\n+    }\n+    externLibs.try_emplace(libdevice, libdevice_path);\n   }\n \n   return externLibs;"}, {"filename": "python/triton/language/libdevice.py", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "file_content_changes": "@@ -3,7 +3,8 @@\n from .. import impl\n from . import core, extern\n \n-LIBDEVICE_PATH = os.path.join(os.path.dirname(os.path.abspath(__file__)), \"..\", \"third_party\", \"cuda\", \"lib\", \"libdevice.10.bc\")\n+LOCAL_PATH = os.path.join(os.path.dirname(os.path.abspath(__file__)), \"..\", \"third_party\", \"cuda\", \"lib\", \"libdevice.10.bc\")\n+LIBDEVICE_PATH = os.getenv(\"TRITON_LIBDEVICE_PATH\", LOCAL_PATH)\n \n \n @impl.extern"}, {"filename": "python/triton/tools/build_extern.py", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "file_content_changes": "@@ -289,7 +289,8 @@ def _output_stubs(self) -> str:\n         #   return extern.dispatch(\"libdevice\", <path>, <args>, <arg_type_symbol_dict>, _builder)\n         import_str = \"from . import core, extern\\n\"\n         import_str += \"import os\\n\"\n-        header_str = \"LIBDEVICE_PATH = os.path.join(os.path.dirname(os.path.abspath(__file__)), \\\"..\\\", \\\"third_party\\\", \\\"cuda\\\", \\\"lib\\\", \\\"libdevice.10.bc\\\")\"\n+        header_str = \"LOCAL_PATH = os.path.join(os.path.dirname(os.path.abspath(__file__)), \\\"..\\\", \\\"third_party\\\", \\\"cuda\\\", \\\"lib\\\", \\\"libdevice.10.bc\\\")\\n\"\n+        header_str += \"LIBDEVICE_PATH = os.getenv(\\\"TRITON_LIBDEVICE_PATH\\\", LOCAL_PATH)\\n\"\n         func_str = \"\"\n         for symbols in self._symbol_groups.values():\n             func_str += \"@extern.extern\\n\""}]