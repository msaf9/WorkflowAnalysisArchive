[{"filename": "lib/codegen/analysis/liveness.cc", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "file_content_changes": "@@ -68,6 +68,7 @@ void liveness::run(ir::module &mod) {\n   }\n \n \n+\n   // Assigns index to each instruction\n   std::map<ir::value*, slot_index> indices;\n   slot_index index = 0;\n@@ -83,13 +84,13 @@ void liveness::run(ir::module &mod) {\n       intervals_[layout] = segment{INT32_MAX, 0};\n   }\n \n-  for(auto& x: live_out)\n+  for(auto& x: live_in)\n   for(shared_layout* layout: x.second)\n     intervals_[layout].start = std::min<int>(intervals_[layout].start, indices[x.first]);\n \n   for(auto& x: live_in)\n   for(shared_layout* layout: x.second){\n-    intervals_[layout].end = std::max<int>(intervals_[layout].end, indices[x.first]);\n+    intervals_[layout].end = std::max<int>(intervals_[layout].end, indices[x.first] + 1);\n   }\n \n   "}, {"filename": "lib/codegen/selection/generator.cc", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "file_content_changes": "@@ -1042,6 +1042,7 @@ void generator::visit_store_inst(ir::store_inst * x){\n         Value* new_elt = vals_[val_op][idxs[i + ii*n_subw + jj]];\n         if(new_elt->getType()->isIntegerTy(1))\n           new_elt = builder_->CreateSExt(new_elt, builder_->getInt8Ty());\n+        new_elt = bit_cast(new_elt, ty);\n         curr = builder_->CreateInsertElement(curr, new_elt, jj);\n       }\n       args.push_back(bit_cast(curr, val_arg_ty));"}]