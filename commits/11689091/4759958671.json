[{"filename": ".github/workflows/integration-tests.yml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "file_content_changes": "@@ -89,7 +89,7 @@ jobs:\n         run: |\n           python3 -m pip install lit\n           cd python\n-          LIT_TEST_DIR=\"build/$(ls build | grep -i temp)/test\"\n+          LIT_TEST_DIR=\"build/$(ls build | grep -i cmake)/test\"\n           if [ ! -d \"${LIT_TEST_DIR}\" ]; then\n             echo \"Coult not find '${LIT_TEST_DIR}'\" ; exit -1\n           fi\n@@ -105,7 +105,7 @@ jobs:\n         if: ${{ env.BACKEND != 'ROCM'}}\n         run: |\n           cd python\n-          cd \"build/$(ls build | grep -i temp)\"\n+          cd \"build/$(ls build | grep -i cmake)\"\n           ctest\n \n       - name: Run python tests on ROCM"}, {"filename": "python/setup.py", "status": "modified", "additions": 15, "deletions": 2, "changes": 17, "file_content_changes": "@@ -161,6 +161,14 @@ def run(self):\n         for ext in self.extensions:\n             self.build_extension(ext)\n \n+    def get_cmake_dir(self):\n+        plat_name = sysconfig.get_platform()\n+        python_version = sysconfig.get_python_version()\n+        dir_name = f\"cmake.{plat_name}-{sys.implementation.name}-{python_version}\"\n+        cmake_dir = Path(self.base_dir) / \"python\" / \"build\" / dir_name\n+        cmake_dir.mkdir(parents=True, exist_ok=True)\n+        return cmake_dir\n+\n     def build_extension(self, ext):\n         lit_dir = shutil.which('lit')\n         user_home = os.getenv(\"HOME\") or os.getenv(\"USERPROFILE\") or \\\n@@ -212,8 +220,9 @@ def build_extension(self, ext):\n                            \"-DCMAKE_SHARED_LINKER_FLAGS=-fuse-ld=lld\"]\n \n         env = os.environ.copy()\n-        subprocess.check_call([\"cmake\", self.base_dir] + cmake_args, cwd=self.build_temp, env=env)\n-        subprocess.check_call([\"cmake\", \"--build\", \".\"] + build_args, cwd=self.build_temp)\n+        cmake_dir = self.get_cmake_dir()\n+        subprocess.check_call([\"cmake\", self.base_dir] + cmake_args, cwd=cmake_dir, env=env)\n+        subprocess.check_call([\"cmake\", \"--build\", \".\"] + build_args, cwd=cmake_dir)\n \n \n download_and_copy_ptxas()\n@@ -236,6 +245,10 @@ def build_extension(self, ext):\n         \"triton/ops\",\n         \"triton/ops/blocksparse\",\n         \"triton/runtime\",\n+        \"triton/runtime/backends\",\n+        \"triton/third_party/cuda/bin\",\n+        \"triton/third_party/cuda/include\",\n+        \"triton/third_party/cuda/lib\",\n         \"triton/tools\",\n     ],\n     install_requires=["}]